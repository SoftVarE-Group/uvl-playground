<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="icon" href="./uvl-icon.PNG" type="image/png">
    <link rel="stylesheet" href="./split.css">
    <link rel="stylesheet" href="./node_modules/intro.js/introjs.css">
    <link rel="stylesheet" href="./node_modules/intro.js/themes/introjs-modern.css">
    <link rel="stylesheet" href="./style.css">
    <title>UVL Playground</title>
</head>
<body>
<div class="header">
    <h1>UVL Playground</h1>
    <h2 id="connection" style="color: red;"></h2>
</div>
<div class="uvl-tutorial-button" id="uvl-tutorialButton"><div class="uvl-tutorial-button-text">?</div></div>
<div class="tutorial-button" id="tutorialButton"><div class="tutorial-button-text">?</div></div>
<div>
    <dialog id="dialog">
        <div>
            <button autofocus id="modalClose">X</button>
        </div>
        <h1>Get the UVLS VSCode Extension</h1>
        <p>You are trying to access the Configuration Page for Feature Models.
            As by now, the Web-Playground does not support this, but it is available in the VSCode Extension!
            Here is a preview:
        </p>
        <img src="https://raw.githubusercontent.com/Universal-Variability-Language/uvl-lsp/master/img/show_editor.gif"
             id="gif_in_dialog" alt="Preview">
        <p>Get the extension <a href="https://marketplace.visualstudio.com/items?itemName=caradhras.uvls-code">here</a>
        </p>
    </dialog>
</div>
<div id="main-div" style="display: flex;">
    <div id="splitter" class="splitter">
        <div id="first">
            <div id="container" class="editor"></div>
        </div>
        <div id="separator"></div>
    
        <div id="second">
            <div class="graph"></div>
        </div>
    </div>
</div>


<div class="footer">
    <p>The Universal Variability Language (UVL) is a community effort towards a widely adopted textual specification
        for feature models. This playground provides the opportunity to get used to the language with
        syntax-highlighting, autocompletion, and simple analysis. It is based on the <a
                href="https://github.com/Universal-Variability-Language/uvl-lsp">UVL Language Server</a>. To fully
        use all features use the UVLS - Universal Variability Language Server extension for visual studio code. </p>
</div>
<script type="module">
    import {startUvlClient} from "./src/main.ts";

    startUvlClient();
</script>
<script>
    // A function is used for dragging and moving
    function dragElement(element, direction) {
        var md; // remember mouse down info
        const first = document.getElementById("first");
        const second = document.getElementById("second");

        element.onmousedown = onMouseDown;

        function onMouseDown(e) {
            //console.log("mouse down: " + e.clientX);
            md = {
                e,
                offsetLeft: element.offsetLeft,
                offsetTop: element.offsetTop,
                firstWidth: first.offsetWidth,
                secondWidth: second.offsetWidth
            };

            document.onmousemove = onMouseMove;
            document.onmouseup = () => {
                //console.log("mouse up");
                document.onmousemove = document.onmouseup = null;
            }
        }

        function onMouseMove(e) {
            //console.log("mouse move: " + e.clientX);
            var delta = {
                x: e.clientX - md.e.clientX,
                y: e.clientY - md.e.clientY
            };

            if (direction === "H") // Horizontal
            {
                // Prevent negative-sized elements
                delta.x = Math.min(Math.max(delta.x, -md.firstWidth),
                    md.secondWidth);

                element.style.left = md.offsetLeft + delta.x + "px";
                first.style.width = (md.firstWidth + delta.x) + "px";
                second.style.width = (md.secondWidth - delta.x) + "px";
            }
        }
    }


    dragElement(document.getElementById("separator"), "H");
</script>
<script>

</script>
</body>
</html>
